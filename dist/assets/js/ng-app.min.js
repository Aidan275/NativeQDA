!function(){function e(e,t){e.when("/login",{title:"NativeQDA | Login",templateUrl:"/components/auth/login/login.view.html",controller:"loginCtrl",controllerAs:"vm",loginRequired:!1}).when("/register",{title:"NativeQDA | Register",templateUrl:"/components/auth/register/register.view.html",controller:"registerCtrl",controllerAs:"vm",loginRequired:!0}).when("/forgot-password",{title:"NativeQDA | Forgot Password",templateUrl:"/components/auth/forgotPass/forgotPass.view.html",controller:"forgotPassCtrl",controllerAs:"vm",loginRequired:!1}).when("/",{title:"NativeQDA | Home",templateUrl:"/components/home/home.view.html",controller:"homeCtrl",controllerAs:"vm",loginRequired:!0}).when("/analysis/map",{title:"NativeQDA | Map",templateUrl:"/components/analysis/map/map.view.html",controller:"mapCtrl",controllerAs:"vm",loginRequired:!0}).when("/analysis/data",{title:"NativeQDA | Datasets",templateUrl:"/components/analysis/data/data.view.html",controller:"dataCtrl",controllerAs:"vm",loginRequired:!0}).when("/analysis/visualisation",{title:"NativeQDA | Visualisations",templateUrl:"/components/analysis/visualisation/visualisation.view.html",controller:"visualisationCtrl",controllerAs:"vm",loginRequired:!0}).when("/survey",{title:"NativeQDA | Surveys",templateUrl:"/components/survey/survey.view.html",controller:"surveyCtrl",controllerAs:"vm",loginRequired:!0}).when("/files/browse",{title:"NativeQDA | File Browser",templateUrl:"/components/files/filesBrowse/filesBrowse.view.html",controller:"filesBrowseCtrl",controllerAs:"vm",loginRequired:!0}).when("/files/upload",{title:"NativeQDA | Upload File",templateUrl:"/components/files/filesUpload/filesUpload.view.html",controller:"filesUploadCtrl",controllerAs:"vm",loginRequired:!0}).when("/settings/system-settings",{title:"NativeQDA | System Settings",templateUrl:"/components/settings/systemSettings/systemSettings.view.html",controller:"systemSettingsCtrl",controllerAs:"vm",loginRequired:!0}).when("/settings/user-settings",{title:"NativeQDA | User Settings",templateUrl:"/components/settings/userSettings/userSettings.view.html",controller:"userSettingsCtrl",controllerAs:"vm",loginRequired:!0}).when("/complete-survey",{title:"NativeQDA | Survey",templateUrl:"/components/survey/completeSurvey/completeSurvey.view.html",controller:"CompleteSurveyCtrl",controllerAs:"vm",loginRequired:!1}).when("/visualisation/bubble-chart",{title:"NativeQDA | Bubble Chart",templateUrl:"/components/visualisations/bubbleChart/bubbleChart.view.html",controller:"bubbleChartCtrl",controllerAs:"vm",loginRequired:!0}).when("/heatmap-example",{title:"NativeQDA | Heatmap Example",templateUrl:"/components/heatmapExample/heatmapExample.view.html",controller:"heatmapCtrl",controllerAs:"vm",loginRequired:!0}).when("/test-analysis/aylien",{title:"NativeQDA | Test Analysis - AYLIEN",templateUrl:"/components/testAnalysis/aylien/testAylien.view.html",controller:"testAylienCtrl",controllerAs:"vm",loginRequired:!0}).when("/test-analysis/watson",{title:"NativeQDA | Test Analysis - Watson",templateUrl:"/components/testAnalysis/watson/testWatson.view.html",controller:"testWatsonCtrl",controllerAs:"vm",loginRequired:!0}).otherwise({redirectTo:"/"}),t.html5Mode(!0)}e.$inject=["$routeProvider","$locationProvider"],angular.module("nativeQDAApp",["ngRoute","ngSanitize","ngTable","ui.bootstrap","ui.bootstrap.datepicker","rzModule","ngFileUpload","ngTagsInput","jp.ng-bs-animated-button","bsLoadingOverlay"]),angular.module("nativeQDAApp").config(["$routeProvider","$locationProvider",e]).run(["$rootScope","$location","authentication","bsLoadingOverlayService",function(e,t,o,a){e.$on("$routeChangeStart",function(e,a,n){var i;a.loginRequired&&!o.isLoggedIn()?(i=t.path(),t.path("/login").replace(),t.search("page",i)):a.loginRequired&&o.isLoggedIn()&&(t.path(i).replace(),i=null)}),e.$on("$routeChangeSuccess",function(t,o,a){o.$$route.title?e.title=o.$$route.title:e.title="NativeQDA"}),a.setGlobalConfig({templateUrl:"/common/views/loadingOverlayTemplate4.html",delay:300})}])}(),function(){"use strict";function e(e,t){e.errorOnUnhandledRejections(!0),toastr.options.closeButton=!0,toastr.options.timeOut=3e3,toastr.options.positionClass="toast-top-right",t.debugEnabled&&t.debugEnabled(!0)}e.$inject=["$qProvider","$logProvider"],angular.module("nativeQDAApp").config(e)}(),function(){"use strict";function e(e,t,o){return{aylienConceptAnalysis:function(a){return e.post("/api/analysis/aylien/concept",a,{headers:{Authorization:"Bearer "+t.getToken()}}).then(function(e){return e}).catch(function(e){return o.catcher("XHR Failed for aylien concept analysis")(e)})},watsonAnalysis:function(a){return e.post("/api/analysis/watson",a,{headers:{Authorization:"Bearer "+t.getToken()}}).then(function(e){return e}).catch(function(e){return o.catcher("XHR Failed for watson analysis")(e)})},watsonConceptAnalysis:function(a){return e.post("/api/analysis/watson-concept-analysis",a,{headers:{Authorization:"Bearer "+t.getToken()}}).then(function(e){return e}).catch(function(e){return o.catcher("XHR Failed for Watson Concept Analysis")(e)})},saveConceptAnalysis:function(a){return e.post("/api/analysis/watson-concept-analysis/save",a,{headers:{Authorization:"Bearer "+t.getToken()}}).then(function(e){return e}).catch(function(e){return o.catcher("XHR Failed for save concept analysis")(e)})},readConceptAnalysis:function(a){return e.get("/api/analysis/watson-concept-analysis/read?id="+a,{headers:{Authorization:"Bearer "+t.getToken()}}).then(function(e){return e}).catch(function(e){return o.catcher("XHR Failed for read concept analysis")(e)})}}}e.$inject=["$http","authentication","exception"],angular.module("nativeQDAApp").service("analysisService",e)}(),function(){"use strict";function e(e,t){return{catcher:function(o){return function(a){var n;return o&&(o+="\n"),a.data&&a.data.description?(n=o+a.data.description,a.data.description=n):a.data&&a.data.message?(n=o+a.data.message,a.data.message=n):a.data&&a.data.errmsg&&(11e3===a.data.code?n=o+"Email already exists in the database":(n=o+a.data.errmsg,a.data.errmsg=n)),t.error(n,a,"Error"),e.reject(a)}}}}e.$inject=["$q","logger"],angular.module("nativeQDAApp").service("exception",e)}(),function(){"use strict";function e(e){return{showToasts:!0,error:function(t,o,a){toastr.error(t,a),e.error("Error: "+t,o)},info:function(t,o,a){toastr.info(t,a),e.info("Info: "+t,o)},success:function(t,o,a){toastr.success(t,a),e.info("Success: "+t,o)},warning:function(t,o,a){toastr.warning(t,a),e.warn("Warning: "+t,o)},log:e.log}}e.$inject=["$log"],angular.module("nativeQDAApp").service("logger",e)}(),function(){"use strict";function e(e,t,o){return{signUploadS3:function(a){return e.post("/api/files/signUploadS3",a,{headers:{Authorization:"Bearer "+t.getToken()}}).then(function(e){return e}).catch(function(e){return o.catcher("XHR Failed for signUploadS3")(e)})},addFileDB:function(a){return e.post("/api/files/addFileDB",a,{headers:{Authorization:"Bearer "+t.getToken()}}).then(function(e){return e}).catch(function(e){return o.catcher("XHR Failed for addFileDB")(e)})},signDownloadS3:function(a){var n=encodeURIComponent(a);return e.get("/api/files/signDownloadS3?key="+n,{headers:{Authorization:"Bearer "+t.getToken()}}).then(function(e){return e}).catch(function(e){return o.catcher("XHR Failed for signDownloadS3")(e)})},getFileListS3:function(){return e.get("/api/files/getFileListS3",{headers:{Authorization:"Bearer "+t.getToken()}}).then(function(e){return e}).catch(function(e){return o.catcher("XHR Failed for getFileListS3")(e)})},getFileListDB:function(a){return e.get("/api/files/getFileListDB?onlyTextFiles="+a,{headers:{Authorization:"Bearer "+t.getToken()}}).then(function(e){return e}).catch(function(e){return o.catcher("XHR Failed for getFileListDB")(e)})},deleteFileS3:function(a){return e.post("/api/files/deleteFileS3",a,{headers:{Authorization:"Bearer "+t.getToken()}}).then(function(e){return e}).catch(function(e){return o.catcher("XHR Failed for deleteFileS3")(e)})},deleteFileDB:function(a){var n=encodeURIComponent(a);return e.delete("/api/files/deleteFileDB?key="+n,{headers:{Authorization:"Bearer "+t.getToken()}}).then(function(e){return e}).catch(function(e){return o.catcher("XHR Failed for deleteFileDB")(e)})},fileReadOneDB:function(a){var n=encodeURIComponent(a);return e.get("/api/files/fileReadOneDB?key="+n,{headers:{Authorization:"Bearer "+t.getToken()}}).then(function(e){return e}).catch(function(e){return o.catcher("XHR Failed for fileReadOneDB")(e)})},objectAclS3:function(a){return e.post("/api/files/objectAclS3",a,{headers:{Authorization:"Bearer "+t.getToken()}}).then(function(e){return e}).catch(function(e){return o.catcher("XHR Failed for objectAclS3")(e)})},objectAclDB:function(a){return e.post("/api/files/objectAclDB",a,{headers:{Authorization:"Bearer "+t.getToken()}}).then(function(e){return e}).catch(function(e){return o.catcher("XHR Failed for objectAclDB")(e)})},syncDBwithS3:function(a){return e.post("/api/files/syncDBwithS3",a,{headers:{Authorization:"Bearer "+t.getToken()}}).then(function(e){return e}).catch(function(e){return o.catcher("XHR Failed for syncDBwithS3")(e)})}}}e.$inject=["$http","authentication","exception"],angular.module("nativeQDAApp").service("filesService",e)}(),function(){function e(e,t,o){return{datasetCreate:function(a){return e.post("/api/analysis/data/create",a,{headers:{Authorization:"Bearer "+t.getToken()}}).then(function(e){return e}).catch(function(e){return o.catcher("XHR Failed for datasetCreate")(e)})},listDatasets:function(){return e.get("/api/analysis/data/list",{headers:{Authorization:"Bearer "+t.getToken()}}).then(function(e){return e}).catch(function(e){return o.catcher("XHR Failed for listDatasets")(e)})},datasetReadOne:function(a){return e.get("/api/analysis/data/read/"+a,{headers:{Authorization:"Bearer "+t.getToken()}}).then(function(e){return e}).catch(function(e){return o.catcher("XHR Failed for datasetReadOne")(e)})},deleteDatasetDB:function(a){var n=encodeURIComponent(a);return e.delete("/api/analysis/data/delete?key="+n,{headers:{Authorization:"Bearer "+t.getToken()}}).then(function(e){return e}).catch(function(e){return o.catcher("XHR Failed for deleteDatasetDB")(e)})}}}e.$inject=["$http","authentication","exception"],angular.module("nativeQDAApp").service("datasetService",e)}(),function(){function e(e,t,o){function a(e){t.localStorage["nativeQDA-token"]=e}function n(){return t.localStorage["nativeQDA-token"]}function i(){var e=n();return!!e&&JSON.parse(t.atob(e.split(".")[1])).exp>Date.now()/1e3}return{currentUser:function(){if(i()){var e=n(),o=JSON.parse(t.atob(e.split(".")[1]));return{email:o.email,firstName:o.firstName}}},saveToken:a,getToken:n,isLoggedIn:i,register:function(t){return e.post("/api/register",t).then(function(e){a(e.data.token)}).catch(function(e){return o.catcher("Registration Failed")(e)})},login:function(t){return e.post("/api/login",t).then(function(e){a(e.data.token)}).catch(function(e){return o.catcher("Login Failed")(e)})},logout:function(o){return t.localStorage.removeItem("nativeQDA-token"),e.post("/api/event",o)}}}e.$inject=["$http","$window","exception"],angular.module("nativeQDAApp").service("authentication",e)}(),function(){function e(e){return{event:function(t){return e.post("/api/event",t)}}}e.$inject=["$http"],angular.module("nativeQDAApp").service("events",e)}(),function(){"use strict";function e(e){return{getPosition:function(t){navigator.geolocation?navigator.geolocation.getCurrentPosition(t,function(t){1==t.code?e.warning(t.message,t,"Warning"):e.error(t.message,t,"Error")}):e.error("Geolocation is not supported by this browser","Error","Error")}}}e.$inject=["logger"],angular.module("nativeQDAApp").service("mapService",e)}(),function(){"use strict";function e(e,t,o){return{getUserInfo:function(a){return e.get("/api/users/info?email="+a,{headers:{Authorization:"Bearer "+t.getToken()}}).then(function(e){return e}).catch(function(e){return o.catcher("XHR Failed for get user info")(e)})}}}e.$inject=["$http","authentication","exception"],angular.module("nativeQDAApp").service("usersService",e)}(),function(){function e(e,t,o,a){var n=this;n.logout=function(){t.logout({email:i,desc:"Logout"}),e.path("/login")},n.popupEditProfile=function(e){a.open({templateUrl:"/components/settings/editProfile/editProfile.view.html",controller:"editProfileCtrl as vm",size:"xl",resolve:{userEmail:function(){return e}}}).result.then(function(){})},n.currentPath=e.path(),n.isLoggedIn=t.isLoggedIn(),n.currentUser=t.currentUser();var i=n.currentUser.email;o.event({email:i})}e.$inject=["$location","authentication","events","$uibModal"],angular.module("nativeQDAApp").controller("navigationCtrl",e)}(),function(){angular.module("nativeQDAApp").directive("navigation",function(){return{restrict:"EA",templateUrl:"/common/directives/navigation/navigation.template.html",controller:"navigationCtrl as navvm"}})}(),function(){angular.module("nativeQDAApp").directive("footerGeneric",function(){return{restrict:"EA",templateUrl:"/common/directives/footerGeneric/footerGeneric.template.html"}})}(),function(){angular.module("nativeQDAApp").directive("pageHeader",function(){return{restrict:"EA",scope:{content:"=content"},templateUrl:"/common/directives/pageHeader/pageHeader.template.html"}})}(),function(){angular.module("nativeQDAApp").filter("formatDistance",function(){return function(t){var o,a=t/1e3;return t&&e(t)?(a>1?(a=parseFloat(a).toFixed(1),o=" km"):(a=parseInt(1e3*a,10).toFixed(1),o=" m"),a+o):"?"}});var e=function(e){return!isNaN(parseFloat(e))&&isFinite(e)}}(),function(){angular.module("nativeQDAApp").filter("addHtmlLineBreaks",function(){return function(e){return e.replace(/\n/g,"<br/>")}})}(),function(){angular.module("nativeQDAApp").filter("formatFileSize",function(){return function(e,t){if(0===e||isNaN(parseFloat(e))||!isFinite(e))return"-";void 0===t&&(t=1);var o=["bytes","kB","MB","GB","TB","PB"],a=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,Math.floor(a))).toFixed(t)+" "+o[a]}})}(),function(){"use strict";function e(e,t,o,a,n,i,r,s){function l(){s.start({referenceId:"home-map"});var e={center:[-34.4054039,150.87842999999998],zoom:4};y.map=L.map("map-homepage",e);var t=L.tileLayer("https://api.mapbox.com/v4/{map}/{z}/{x}/{y}.png?access_token={accessToken}",{map:"mapbox.light",accessToken:"pk.eyJ1IjoiYWlkYW4yNzUiLCJhIjoiY2o0MWVrMmFxMGVuNjJxbnlocmV6ZDJ0cCJ9.h77mANND4PPZz9U1z4OC3w",maxZoom:22}),o=L.tileLayer("https://api.mapbox.com/v4/{map}/{z}/{x}/{y}.png?access_token={accessToken}",{map:"mapbox.dark",accessToken:"pk.eyJ1IjoiYWlkYW4yNzUiLCJhIjoiY2o0MWVrMmFxMGVuNjJxbnlocmV6ZDJ0cCJ9.h77mANND4PPZz9U1z4OC3w",maxZoom:22}),a=L.tileLayer("https://api.mapbox.com/v4/{map}/{z}/{x}/{y}.png?access_token={accessToken}",{map:"mapbox.satellite",accessToken:"pk.eyJ1IjoiYWlkYW4yNzUiLCJhIjoiY2o0MWVrMmFxMGVuNjJxbnlocmV6ZDJ0cCJ9.h77mANND4PPZz9U1z4OC3w",maxZoom:22}),n=L.tileLayer("https://api.mapbox.com/v4/{map}/{z}/{x}/{y}.png?access_token={accessToken}",{map:"mapbox.streets-satellite",accessToken:"pk.eyJ1IjoiYWlkYW4yNzUiLCJhIjoiY2o0MWVrMmFxMGVuNjJxbnlocmV6ZDJ0cCJ9.h77mANND4PPZz9U1z4OC3w",maxZoom:22}),i=L.tileLayer("https://api.mapbox.com/v4/{map}/{z}/{x}/{y}.png?access_token={accessToken}",{map:"mapbox.wheatpaste",accessToken:"pk.eyJ1IjoiYWlkYW4yNzUiLCJhIjoiY2o0MWVrMmFxMGVuNjJxbnlocmV6ZDJ0cCJ9.h77mANND4PPZz9U1z4OC3w",maxZoom:22}),r=L.tileLayer("https://api.mapbox.com/v4/{map}/{z}/{x}/{y}.png?access_token={accessToken}",{map:"mapbox.streets-basic",accessToken:"pk.eyJ1IjoiYWlkYW4yNzUiLCJhIjoiY2o0MWVrMmFxMGVuNjJxbnlocmV6ZDJ0cCJ9.h77mANND4PPZz9U1z4OC3w",maxZoom:22}).addTo(y.map),l=(L.tileLayer("https://api.mapbox.com/v4/{map}/{z}/{x}/{y}.png?access_token={accessToken}",{map:"mapbox.comic",accessToken:"pk.eyJ1IjoiYWlkYW4yNzUiLCJhIjoiY2o0MWVrMmFxMGVuNjJxbnlocmV6ZDJ0cCJ9.h77mANND4PPZz9U1z4OC3w",maxZoom:22}),L.tileLayer("https://api.mapbox.com/v4/{map}/{z}/{x}/{y}.png?access_token={accessToken}",{map:"mapbox.outdoors",accessToken:"pk.eyJ1IjoiYWlkYW4yNzUiLCJhIjoiY2o0MWVrMmFxMGVuNjJxbnlocmV6ZDJ0cCJ9.h77mANND4PPZz9U1z4OC3w",maxZoom:22})),u=L.tileLayer("https://api.mapbox.com/v4/{map}/{z}/{x}/{y}.png?access_token={accessToken}",{map:"mapbox.run-bike-hike",accessToken:"pk.eyJ1IjoiYWlkYW4yNzUiLCJhIjoiY2o0MWVrMmFxMGVuNjJxbnlocmV6ZDJ0cCJ9.h77mANND4PPZz9U1z4OC3w",maxZoom:22}),p=L.tileLayer("https://api.mapbox.com/v4/{map}/{z}/{x}/{y}.png?access_token={accessToken}",{map:"mapbox.pencil",accessToken:"pk.eyJ1IjoiYWlkYW4yNzUiLCJhIjoiY2o0MWVrMmFxMGVuNjJxbnlocmV6ZDJ0cCJ9.h77mANND4PPZz9U1z4OC3w",maxZoom:22}),g=L.tileLayer("https://api.mapbox.com/v4/{map}/{z}/{x}/{y}.png?access_token={accessToken}",{map:"mapbox.pirates",accessToken:"pk.eyJ1IjoiYWlkYW4yNzUiLCJhIjoiY2o0MWVrMmFxMGVuNjJxbnlocmV6ZDJ0cCJ9.h77mANND4PPZz9U1z4OC3w",maxZoom:22}),d=L.tileLayer("https://api.mapbox.com/v4/{map}/{z}/{x}/{y}.png?access_token={accessToken}",{map:"mapbox.emerald",accessToken:"pk.eyJ1IjoiYWlkYW4yNzUiLCJhIjoiY2o0MWVrMmFxMGVuNjJxbnlocmV6ZDJ0cCJ9.h77mANND4PPZz9U1z4OC3w",maxZoom:22}),f=L.tileLayer("https://api.mapbox.com/v4/{map}/{z}/{x}/{y}.png?access_token={accessToken}",{map:"mapbox.high-contrast",accessToken:"pk.eyJ1IjoiYWlkYW4yNzUiLCJhIjoiY2o0MWVrMmFxMGVuNjJxbnlocmV6ZDJ0cCJ9.h77mANND4PPZz9U1z4OC3w",maxZoom:22}),h=L.gridLayer.googleMutant({maxZoom:22,type:"roadmap"}),v=L.gridLayer.googleMutant({maxZoom:22,type:"satellite"}),w=L.gridLayer.googleMutant({maxZoom:22,type:"terrain"}),x=L.gridLayer.googleMutant({maxZoom:22,type:"hybrid"}),k=L.gridLayer.googleMutant({maxZoom:22,type:"roadmap"});k.addGoogleLayer("TrafficLayer"),L.control.layers({"Mapbox Light":t,"Mapbox Dark":o,"Mapbox Satellite":a,"Mapbox Streets Satellite":n,"Mapbox Wheatpaste":i,"Mapbox Streets Basic":r,"Mapbox Outdoors":l,"Mapbox Run Bike Hike":u,"Mapbox Pencil":p,"Mapbox Pirates":g,"Mapbox Emerald":d,"Mapbox High Contrast":f,"Google Roadmap":h,"Google Aerial":v,"Google Terrain":w,"Google Hybrid":x,"Google Traffic":k},{},{collapsed:!0}).addTo(y.map),c(),m()}function c(e){y.map.on("locationfound",u),y.map.on("locationerror",p),y.map.locate({setView:!0,maxZoom:15})}function u(e){var t=e.accuracy/2,a=t<9?22:t>8&&t<17?21:t>16&&t<32?20:t>31&&t<63?19:t>62&&t<126?18:t>125&&t<251?17:t>250&&t<551?16:t>550&&t<1101?15:t>1100&&t<2201?14:t>2200&&t<4401?13:t>4400&&t<8801?12:t>8800&&t<17601?11:t>17600&&t<35201?10:t>35200&&t<70401?9:t>70400&&t<140801?8:t>140800&&t<281601?7:t>281600&&t<563201?6:t>563200&&t<1126401?5:t>1126400&&t<2252801?4:t>2252800&&t<4505601?3:t>4505600&&t<9011201?2:1,n=e.latlng,i=L.marker(n,{icon:x,zIndexOffset:-500}).addTo(y.map).bindPopup("You are within "+o("formatDistance")(t)+" from this point").bindTooltip("<strong>Your Position</strong>"),s=L.circle(n,{radius:t,color:"#cb2529"});i.on("popupopen",function(){s.addTo(y.map),y.map.setView(n,a)}),i.on("popupclose",function(){y.map.removeLayer(s)}),r.success("User's location found",e,"Success")}function p(e){r.error(e.message,e,"Error")}function m(){e.getFileListDB().then(function(e){s.stop({referenceId:"home-map"}),y.fileList=e.data,g()})}function g(){y.markers=L.markerClusterGroup({showCoverageOnHover:!1}),y.fileList.forEach(function(e){var n=e.coords.coordinates[1],i=e.coords.coordinates[0],r=L.marker([n,i],{icon:w}),s='<div class="info-window"><h3>'+e.name+"</h3><p><strong>Created By:</strong> "+e.createdBy+"<br /><strong>Size:</strong> "+o("formatFileSize")(e.size,2)+"<br /><strong>Last Modified:</strong> "+o("date")(e.lastModified,"dd MMMM, yyyy h:mm a");0!=e.tags.length?(s+="<br /><strong>Tags:</strong> ",s+=e.tags.join(", ")+"</p>"):s+="</p>",s+='<a ng-click="vm.viewFile(fileKey)" class="btn btn-success" role="button">View</a> <a ng-click="vm.popupFileDetails(fileKey)" class="btn btn-primary" role="button">Details</a> <a ng-click="vm.confirmDelete(fileKey, fileName, textFileKey)" class="btn btn-danger" role="button">Delete</a></div>';var l=a(angular.element(s)),c=t.$new();if(c.fileKey=e.key,c.fileName=e.name,r.bindPopup(l(c)[0]),1!=L.Browser.mobile){var u="<strong>File Name:</strong> "+e.name+"<br /><strong>Created By:</strong> "+e.createdBy+"<br /><strong>Last Modified:</strong> "+o("date")(e.lastModified,"dd MMMM, yyyy h:mm a");r.bindTooltip(u)}r.on("popupopen",function(){y.currentMarker=this;var e=r.getTooltip();e&&e.setOpacity(0)}),r.on("popupclose",function(){y.currentMarker=null;var e=r.getTooltip();e&&e.setOpacity(.9)}),y.markers.addLayer(r)}),y.map.addLayer(y.markers)}function d(t,o,a){e.deleteFileDB(t).then(function(e){f(t,o,a)})}function f(t,o,a){e.deleteFileS3({key:t}).then(function(n){a&&a!=t&&e.deleteFileS3({key:a}),h(),r.success("'"+o+"' was deleted successfully","","Success")})}function h(){y.markers.removeLayer(y.currentMarker)}var y=this;y.getFileList=m,y.viewFile=function(t){e.signDownloadS3(t).then(function(e){n.open(e.data,"_blank")})},y.popupFileDetails=function(e){i.open({templateUrl:"/components/files/fileDetails/fileDetails.view.html",controller:"fileDetails as vm",size:"lg",resolve:{key:function(){return e}}}).result.then(function(){})},y.confirmDelete=function(e,t,o){swal({title:"Are you sure?",text:"Confirm to delete the file '"+t+"'",type:"warning",showCancelButton:!0,allowOutsideClick:!0,confirmButtonColor:"#d9534f",confirmButtonText:"Yes, delete it!"},function(){d(e,t,o)})},y.map=null,y.markers=[],y.currentMarker=null,y.fileList=[],y.pageHeader={title:"Dashboard",strapline:"summary of recent activity"};var v=L.Icon.extend({options:{shadowUrl:"assets/img/map/markers/marker-shadow.png",iconSize:[25,41],shadowSize:[41,41],iconAnchor:[12.5,41],shadowAnchor:[12.5,41],popupAnchor:[0,-50]}}),w=new v({iconUrl:"assets/img/map/markers/marker-icon-2x.png"}),x=new v({iconUrl:"assets/img/map/markers/marker-icon-pos.png"});l()}e.$inject=["filesService","$scope","$filter","$compile","$window","$uibModal","logger","bsLoadingOverlayService"],angular.module("nativeQDAApp").controller("homeCtrl",e)}(),function(){function e(e,t,o,a){function n(){o.event({email:i.credentials.email,desc:"Login"}),t.login(i.credentials).then(function(t){e.search("page",null),e.path(i.returnPage)})}var i=this;i.onSubmit=function(){if(!i.credentials.email||!i.credentials.password)return a.error("All fields required, please try again","Error","Error"),!1;n()},i.login=n,i.credentials={email:"",password:""},i.pageHeader={title:"Sign in to nativeQDA"},i.returnPage=e.search().page||"/"}angular.module("nativeQDAApp").controller("loginCtrl",e),e.$inject=["$location","authentication","events","logger"]}(),function(){function e(e,t,o){function a(){t.register(n.credentials).then(function(){e.search("page",null),e.path(n.returnPage)})}var n=this;n.onSubmit=function(){if(!(n.credentials.password&&n.credentials.email&&n.credentials.firstName&&n.credentials.lastName))return o.error("Missing fields required, please try again","","Error"),!1;a()},n.register=a,n.credentials={password:"",email:"",firstName:"",lastName:"",company:""},n.pageHeader={title:"Create a new NativeQDA account"},n.returnPage=e.search().page||"/"}angular.module("nativeQDAApp").controller("registerCtrl",e),e.$inject=["$location","authentication","logger"]}(),function(){function e(e,t){var o=this;o.onSubmit=function(){if(o.formError="",!o.email)return t.error("All fields required, please try again","","Error"),!1;t.info("TODO: verify user's email and send link to reset password","","TODO")},o.email="",o.pageHeader={title:"Forgot Password"}}angular.module("nativeQDAApp").controller("forgotPassCtrl",e),e.$inject=["authentication","logger"]}(),function(){"use strict";function e(e,t,o,a,n,i,r,s){function l(){s.start({referenceId:"map"});var e={center:[-34.4054039,150.87842999999998],zoom:4};y.map=L.map("map",e);var t=L.tileLayer("https://api.mapbox.com/v4/{map}/{z}/{x}/{y}.png?access_token={accessToken}",{map:"mapbox.light",accessToken:"pk.eyJ1IjoiYWlkYW4yNzUiLCJhIjoiY2o0MWVrMmFxMGVuNjJxbnlocmV6ZDJ0cCJ9.h77mANND4PPZz9U1z4OC3w",maxZoom:22}),o=L.tileLayer("https://api.mapbox.com/v4/{map}/{z}/{x}/{y}.png?access_token={accessToken}",{map:"mapbox.dark",accessToken:"pk.eyJ1IjoiYWlkYW4yNzUiLCJhIjoiY2o0MWVrMmFxMGVuNjJxbnlocmV6ZDJ0cCJ9.h77mANND4PPZz9U1z4OC3w",maxZoom:22}),a=L.tileLayer("https://api.mapbox.com/v4/{map}/{z}/{x}/{y}.png?access_token={accessToken}",{map:"mapbox.satellite",accessToken:"pk.eyJ1IjoiYWlkYW4yNzUiLCJhIjoiY2o0MWVrMmFxMGVuNjJxbnlocmV6ZDJ0cCJ9.h77mANND4PPZz9U1z4OC3w",maxZoom:22}),n=L.tileLayer("https://api.mapbox.com/v4/{map}/{z}/{x}/{y}.png?access_token={accessToken}",{map:"mapbox.streets-satellite",accessToken:"pk.eyJ1IjoiYWlkYW4yNzUiLCJhIjoiY2o0MWVrMmFxMGVuNjJxbnlocmV6ZDJ0cCJ9.h77mANND4PPZz9U1z4OC3w",maxZoom:22}),i=L.tileLayer("https://api.mapbox.com/v4/{map}/{z}/{x}/{y}.png?access_token={accessToken}",{map:"mapbox.wheatpaste",accessToken:"pk.eyJ1IjoiYWlkYW4yNzUiLCJhIjoiY2o0MWVrMmFxMGVuNjJxbnlocmV6ZDJ0cCJ9.h77mANND4PPZz9U1z4OC3w",maxZoom:22}),r=L.tileLayer("https://api.mapbox.com/v4/{map}/{z}/{x}/{y}.png?access_token={accessToken}",{map:"mapbox.streets-basic",accessToken:"pk.eyJ1IjoiYWlkYW4yNzUiLCJhIjoiY2o0MWVrMmFxMGVuNjJxbnlocmV6ZDJ0cCJ9.h77mANND4PPZz9U1z4OC3w",maxZoom:22}).addTo(y.map),l=(L.tileLayer("https://api.mapbox.com/v4/{map}/{z}/{x}/{y}.png?access_token={accessToken}",{map:"mapbox.comic",accessToken:"pk.eyJ1IjoiYWlkYW4yNzUiLCJhIjoiY2o0MWVrMmFxMGVuNjJxbnlocmV6ZDJ0cCJ9.h77mANND4PPZz9U1z4OC3w",maxZoom:22}),L.tileLayer("https://api.mapbox.com/v4/{map}/{z}/{x}/{y}.png?access_token={accessToken}",{map:"mapbox.outdoors",accessToken:"pk.eyJ1IjoiYWlkYW4yNzUiLCJhIjoiY2o0MWVrMmFxMGVuNjJxbnlocmV6ZDJ0cCJ9.h77mANND4PPZz9U1z4OC3w",maxZoom:22})),u=L.tileLayer("https://api.mapbox.com/v4/{map}/{z}/{x}/{y}.png?access_token={accessToken}",{map:"mapbox.run-bike-hike",accessToken:"pk.eyJ1IjoiYWlkYW4yNzUiLCJhIjoiY2o0MWVrMmFxMGVuNjJxbnlocmV6ZDJ0cCJ9.h77mANND4PPZz9U1z4OC3w",maxZoom:22}),p=L.tileLayer("https://api.mapbox.com/v4/{map}/{z}/{x}/{y}.png?access_token={accessToken}",{map:"mapbox.pencil",accessToken:"pk.eyJ1IjoiYWlkYW4yNzUiLCJhIjoiY2o0MWVrMmFxMGVuNjJxbnlocmV6ZDJ0cCJ9.h77mANND4PPZz9U1z4OC3w",maxZoom:22}),g=L.tileLayer("https://api.mapbox.com/v4/{map}/{z}/{x}/{y}.png?access_token={accessToken}",{map:"mapbox.pirates",accessToken:"pk.eyJ1IjoiYWlkYW4yNzUiLCJhIjoiY2o0MWVrMmFxMGVuNjJxbnlocmV6ZDJ0cCJ9.h77mANND4PPZz9U1z4OC3w",maxZoom:22}),d=L.tileLayer("https://api.mapbox.com/v4/{map}/{z}/{x}/{y}.png?access_token={accessToken}",{map:"mapbox.emerald",accessToken:"pk.eyJ1IjoiYWlkYW4yNzUiLCJhIjoiY2o0MWVrMmFxMGVuNjJxbnlocmV6ZDJ0cCJ9.h77mANND4PPZz9U1z4OC3w",maxZoom:22}),f=L.tileLayer("https://api.mapbox.com/v4/{map}/{z}/{x}/{y}.png?access_token={accessToken}",{map:"mapbox.high-contrast",accessToken:"pk.eyJ1IjoiYWlkYW4yNzUiLCJhIjoiY2o0MWVrMmFxMGVuNjJxbnlocmV6ZDJ0cCJ9.h77mANND4PPZz9U1z4OC3w",maxZoom:22}),h=L.gridLayer.googleMutant({maxZoom:22,type:"roadmap"}),v=L.gridLayer.googleMutant({maxZoom:22,type:"satellite"}),w=L.gridLayer.googleMutant({maxZoom:22,type:"terrain"}),k=L.gridLayer.googleMutant({maxZoom:22,type:"hybrid"}),b=L.gridLayer.googleMutant({maxZoom:22,type:"roadmap"});b.addGoogleLayer("TrafficLayer"),L.control.layers({"Mapbox Light":t,"Mapbox Dark":o,"Mapbox Satellite":a,"Mapbox Streets Satellite":n,"Mapbox Wheatpaste":i,"Mapbox Streets Basic":r,"Mapbox Outdoors":l,"Mapbox Run Bike Hike":u,"Mapbox Pencil":p,"Mapbox Pirates":g,"Mapbox Emerald":d,"Mapbox High Contrast":f,"Google Roadmap":h,"Google Aerial":v,"Google Terrain":w,"Google Hybrid":k,"Google Traffic":b},{},{collapsed:!0}).addTo(y.map),y.posMarker=L.marker([y.lat,y.lng],{icon:x,zIndexOffset:-500}).bindTooltip("<strong>Your Position</strong>"),c(),m()}function c(e){y.map.on("locationfound",u),y.map.on("locationerror",p),y.map.locate({setView:!0,maxZoom:15})}function u(e){var t=e.accuracy/2,a=t<9?22:t>8&&t<17?21:t>16&&t<32?20:t>31&&t<63?19:t>62&&t<126?18:t>125&&t<251?17:t>250&&t<551?16:t>550&&t<1101?15:t>1100&&t<2201?14:t>2200&&t<4401?13:t>4400&&t<8801?12:t>8800&&t<17601?11:t>17600&&t<35201?10:t>35200&&t<70401?9:t>70400&&t<140801?8:t>140800&&t<281601?7:t>281600&&t<563201?6:t>563200&&t<1126401?5:t>1126400&&t<2252801?4:t>2252800&&t<4505601?3:t>4505600&&t<9011201?2:1,n=e.latlng;y.posMarker.setLatLng(n),y.posMarker.bindPopup("<p>You are within "+o("formatDistance")(t)+" from this point</p>"),y.posMarker.addTo(y.map);var i=L.circle(n,{radius:t,color:"#cb2529"});y.posMarker.on("popupopen",function(){i.addTo(y.map),y.map.setView(n,a)}),y.posMarker.on("popupclose",function(){y.map.removeLayer(i)}),r.success("User's location found",e,"Success")}function p(e){r.error(e.message,e,"Error")}function m(){e.getFileListDB().then(function(e){s.stop({referenceId:"map"}),y.fileList=e.data,g()})}function g(){y.markers=L.markerClusterGroup({showCoverageOnHover:!1}),y.fileList.forEach(function(e){var n=e.coords.coordinates[1],i=e.coords.coordinates[0],r=L.marker([n,i],{icon:w}),s='<div class="info-window"><h3>'+e.name+"</h3><p><strong>Created By:</strong> "+e.createdBy+"<br /><strong>Size:</strong> "+o("formatFileSize")(e.size,2)+"<br /><strong>Last Modified:</strong> "+o("date")(e.lastModified,"dd MMMM, yyyy h:mm a");0!=e.tags.length?(s+="<br /><strong>Tags:</strong> ",s+=e.tags.join(", ")+"</p>"):s+="</p>",s+='<a ng-click="vm.viewFile(fileKey)" class="btn btn-success" role="button">View</a> <a ng-click="vm.popupFileDetails(fileKey)" class="btn btn-primary" role="button">Details</a> <a ng-click="vm.confirmDelete(fileKey, fileName, textFileKey)" class="btn btn-danger" role="button">Delete</a></div>';var l=a(angular.element(s)),c=t.$new();if(c.fileKey=e.key,c.fileName=e.name,r.bindPopup(l(c)[0]),1!=L.Browser.mobile){var u="<strong>File Name:</strong> "+e.name+"<br /><strong>Created By:</strong> "+e.createdBy+"<br /><strong>Last Modified:</strong> "+o("date")(e.lastModified,"dd MMMM, yyyy h:mm a");r.bindTooltip(u)}r.on("popupopen",function(){y.currentMarker=this;var e=r.getTooltip();e&&e.setOpacity(0)}),r.on("popupclose",function(){y.currentMarker=null;var e=r.getTooltip();e&&e.setOpacity(.9)}),y.markers.addLayer(r)}),y.map.addLayer(y.markers)}function d(t,o,a){e.deleteFileDB(t).then(function(e){f(t,o,a)})}function f(t,o,a){e.deleteFileS3({key:t}).then(function(n){a&&a!=t&&e.deleteFileS3({key:a}),h(),r.success("'"+o+"' was deleted successfully","","Success")})}function h(){y.markers.removeLayer(y.currentMarker)}var y=this;y.getFileList=m,y.viewFile=function(t){e.signDownloadS3(t).then(function(e){n.open(e.data,"_blank")})},y.popupFileDetails=function(e){i.open({templateUrl:"/components/files/fileDetails/fileDetails.view.html",controller:"fileDetails as vm",size:"lg",resolve:{key:function(){return e}}}).result.then(function(){})},y.confirmDelete=function(e,t,o){swal({title:"Are you sure?",text:"Confirm to delete the file '"+t+"'",type:"warning",showCancelButton:!0,allowOutsideClick:!0,confirmButtonColor:"#d9534f",confirmButtonText:"Yes, delete it!"},function(){d(e,t,o)})},y.map=null,y.fileList=null,y.markers=[],y.posMarker=null,y.lat=-34.4054039,y.lng=150.87842999999998,y.currentMarker=null;var v=L.Icon.extend({options:{shadowUrl:"assets/img/map/markers/marker-shadow.png",iconSize:[25,41],shadowSize:[41,41],iconAnchor:[12.5,41],shadowAnchor:[12.5,41],popupAnchor:[0,-50]}}),w=new v({iconUrl:"assets/img/map/markers/marker-icon-2x.png"}),x=new v({iconUrl:"assets/img/map/markers/marker-icon-pos.png"});l()}e.$inject=["filesService","$scope","$filter","$compile","$window","$uibModal","logger","bsLoadingOverlayService"],angular.module("nativeQDAApp").controller("mapCtrl",e)}(),function(){function e(e,t,o,a,n,i,r){function s(){n.listDatasets().then(function(e){m.dataset=e.data,l()})}function l(){m.tableParams=new a({sorting:{dateCreated:"desc"}},{dataset:m.dataset})}function c(e,t){n.deleteDatasetDB(e).then(function(o){u(e,t)})}function u(e,t){r.deleteFileS3({key:e}).then(function(o){p(e),i.success('Dataset "'+t+'" was successfully deleted',"","Success")})}function p(e){var t=m.dataset.findIndex(function(t){return t.key==e});t>-1&&m.dataset.splice(t,1),l()}var m=this;m.getDatasetList=s,m.confirmDelete=function(e,t){swal({title:"Are you sure?",text:"Confirm to delete the dataset '"+t+"'",type:"warning",showCancelButton:!0,allowOutsideClick:!0,confirmButtonColor:"#d9534f",confirmButtonText:"Yes, delete it!"},function(){c(e,t)})},m.popupViewDataset=function(e){o.open({templateUrl:"/components/analysis/data/viewDataset/viewDataset.view.html",controller:"viewDatasetCtrl as vm",size:"lg",resolve:{datasetId:function(){return e}}}).result.then(function(){})},m.popupEditDataset=function(e,t){o.open({templateUrl:"/components/analysis/data/editDataset/editDataset.view.html",controller:"editDatasetCtrl as vm",size:"xl"}).result.then(function(){})},m.popupNewDataset=function(){o.open({templateUrl:"/components/analysis/data/newDataset/newDataset.view.html",controller:"newDatasetCtrl as vm",size:"xl"}).result.then(function(e){m.dataset.push(e),l()})},m.dataset=[],m.pageHeader={title:"Data",strapline:"where the Datasets live"},s()}e.$inject=["$window","$sce","$uibModal","NgTableParams","datasetService","logger","filesService"],angular.module("nativeQDAApp").controller("dataCtrl",e)}(),function(){"use strict";function e(e,t,o,a,n,i,r,s){function l(){o.getFileListDB("true").then(function(e){d.fileList=e.data,c()})}function c(){d.tableParams=new n({sorting:{lastModified:"desc"}},{dataset:d.fileList})}function u(){var e=Object.keys(d.formData.checkboxes);d.datasetFiles=e.filter(function(e){return d.formData.checkboxes[e]}),p()}function p(){var e=0,t="";d.datasetFiles.forEach(function(a){o.signDownloadS3(a).then(function(o){jQuery.get(o.data,function(o){t+=o+"\n\n",++e===d.datasetFiles.length&&m(t)})})})}function m(e){g(new File([e],d.formData.datasetName,{type:"text/plain"}))}function g(e){o.signUploadS3({name:e.name,type:"text/plain",dataset:!0}).then(function(o){r.upload({method:"POST",url:o.data.url,fields:o.data.fields,file:e}).progress(function(e){d.currentPercentage=parseInt(100*e.loaded/e.total)}).then(function(n){console.log(d.formData.datasetName+" successfully uploaded to S3");var i=o.data.fields.key,r=o.data.url+"/"+encodeURIComponent(i);t.datasetCreate({name:d.formData.datasetName,desc:d.formData.description,size:e.size,key:i,url:r,createdBy:s.currentUser().firstName,files:d.datasetFiles}).then(function(e){console.log(d.formData.datasetName+" successfully added to DB"),a.success('Dataset "'+d.formData.datasetName+'" was created successfully',"","Success"),d.modal.close(e.data)})},function(e){var t=$.parseXML(e.data);a.error($(t).find("Message").text(),"","Error"),cleanUpForNextUpload()})})}var d=this;d.onSubmit=function(){angular.isDefined(d.formData)&&d.formData.datasetName&&d.formData.description&&d.formData.checkboxes?u():a.error("All fields required, please try again","","Error")},d.viewFile=function(e){o.signDownloadS3(e).then(function(e){i.open(e.data,"_blank")})},d.formData,d.fileList=null,d.datasetFiles=null,l(),d.modal={close:function(t){e.close(t)},cancel:function(){e.dismiss("cancel")}}}e.$inject=["$uibModalInstance","datasetService","filesService","logger","NgTableParams","$window","Upload","authentication"],angular.module("nativeQDAApp").controller("newDatasetCtrl",e)}(),function(){function e(e,t,o,a,n){function i(){t.datasetReadOne(o).then(function(e){r.dataset=e.data,r.dataset.files.forEach(function(e){var t=e.substring(e.indexOf("-")+1),o={};o.key=e,o.name=t,r.files.push(o)})})}var r=this;r.viewFile=function(e){a.signDownloadS3(e).then(function(e){n.open(e.data,"_blank")})},r.files=[],i(),r.modal={close:function(){e.close()},cancel:function(){e.dismiss("cancel")}}}e.$inject=["$uibModalInstance","datasetService","datasetId","filesService","$window"],angular.module("nativeQDAApp").controller("viewDatasetCtrl",e)}(),function(){function e(e,t){this.modal={close:function(){e.close()},cancel:function(){e.dismiss("cancel")}}}angular.module("nativeQDAApp").controller("editDatasetCtrl",e),e.$inject=["$uibModalInstance","datasetService"]}(),function(){function e(e,t,o,a,n){function i(){c.visuals=[{visual:"Concept Map",visualThumb:"concept-map-thumb.png",dataSet:"English vs French",createdBy:"Anu",dateCreated:"2017/04/25",_id:"1"},{visual:"Word Cloud",visualThumb:"word-cloud-thumb.png",dataSet:"English vs French",createdBy:"Anu",dateCreated:"2016/01/12",_id:"2"},{visual:"Chord Diagram",visualThumb:"chord-diagram-thumb.png",dataSet:"English vs French",createdBy:"Anu",dateCreated:"2016/03/29",_id:"3"},{visual:"Concept Map",visualThumb:"concept-map-thumb.png",dataSet:"Kanaks - Drehu",createdBy:"Michael",dateCreated:"2016/09/15",_id:"4"},{visual:"Concept Map",visualThumb:"concept-map-thumb.png",dataSet:"English vs French",createdBy:"Anu",dateCreated:"2017/04/25",_id:"5"},{visual:"Word Frequency Chart",visualThumb:"bar-chart-thumb.png",dataSet:"Kanaks - Drehu",createdBy:"Michael",dateCreated:"2016/01/12",_id:"6"},{visual:"Word Tree",visualThumb:"word-tree-thumb.png",dataSet:"Qualitative study of the Moriori language",createdBy:"Michael",dateCreated:"2017/03/29",_id:"7"}],r()}function r(){c.tableParams=new o({sorting:{dateCreated:"desc"}},{dataset:c.visuals})}function s(e){l(e)}function l(e){var t=c.visuals.findIndex(function(t){return t._id==e});t>-1&&c.visuals.splice(t,1),r()}var c=this;c.getVisualsList=i,c.confirmDelete=function(e,t){swal({title:"Are you sure?",text:"Confirm to delete the visualisation '"+e+"'",type:"warning",showCancelButton:!0,allowOutsideClick:!0,confirmButtonColor:"#d9534f",confirmButtonText:"Yes, delete it!"},function(){s(t)})},c.popupNewVisual=function(){n.open({templateUrl:"/components/analysis/visualisation/newVisualisation/newVisualisation.view.html",controller:"newVisualisationCtrl as vm",size:"xl"}).result.then(function(){})},c.visuals=[],c.pageHeader={title:"Visualisation",strapline:"visualise datasets here"},i()}angular.module("nativeQDAApp").controller("visualisationCtrl",e),e.$inject=["$scope","$window","NgTableParams","$sce","$uibModal"]}(),function(){"use strict";function e(e,t,o,a,n,i,r,s){function l(){a.listDatasets().then(function(e){m.datasetList=e.data,c()})}function c(){m.tableParams=new o({sorting:{lastModified:"desc"}},{dataset:m.datasetList})}function u(){m.isSubmittingButton=!0,n.signDownloadS3(m.formData.selectedDatasetKey).then(function(e){i.watsonConceptAnalysis({url:e.data}).then(function(e){m.analysisResults=e.data,p()},function(e){m.resultButton="error"})},function(e){m.resultButton="error"})}function p(){var e={name:m.formData.visualisationName,description:m.formData.description,createdBy:r.currentUser().firstName,sourceDataKey:m.formData.selectedDatasetKey,language:m.analysisResults.language,concepts:m.analysisResults.concepts};i.saveConceptAnalysis(e).then(function(e){s.success('Visualisation "'+m.formData.visualisationName+'" was created successfully',"","Success"),m.resultButton="success"},function(e){m.resultButton="error"})}var m=this;m.onSubmit=function(){angular.isDefined(m.formData)&&m.formData.visualisationName&&m.formData.description&&m.formData.selectedDatasetKey?u():s.error("All fields required, please try again","","Error")},m.viewFile=function(e){n.signDownloadS3(e).then(function(e){t.open(e.data,"_blank")})},m.datasetList,m.tableParams,m.formData,m.analysisResults,m.isSubmittingButton=null,m.resultButton=null,m.createButtonOptions={buttonDefaultText:"Create Visualisation",animationCompleteTime:1e3,buttonSubmittingText:"Processing...",buttonSuccessText:"Done!"},l(),m.modal={close:function(){e.close()},cancel:function(){e.dismiss("cancel")}}}e.$inject=["$uibModalInstance","$window","NgTableParams","datasetService","filesService","analysisService","authentication","logger"],angular.module("nativeQDAApp").controller("newVisualisationCtrl",e)}(),function(){angular.module("nativeQDAApp").controller("CompleteSurveyCtrl",function(){var e=this;e.surveyCode="",e.onSubmit=function(){if(e.formError="",!e.surveyCode)return e.formError="All fields required, please try again",!1;console.log("Find survey and display to user!")}})}(),function(){function e(e,t,o,a,n){var i=this;i.pageHeader={title:"Surveys",strapline:"for the masses"},i.popupNewSurveyForm=function(){n.open({templateUrl:"/pages/survey/newSurvey/newSurvey.view.html",controller:"newSurveyCtrl as vm",size:"xl"}).result.then(function(){})};var r=[{survey:"Survey",createdBy:"Anu",responses:12,dateCreated:"2017/05/26",command:"id1"},{survey:"Survey2",createdBy:"Michael",responses:50,dateCreated:"2017/05/02",command:"id1"},{survey:"Survey3",createdBy:"Michael",responses:23,dateCreated:"2017/02/12",command:"id1"},{survey:"Survey4",createdBy:"Anu",responses:50,dateCreated:"2017/02/15",command:"id1"},{survey:"Survey5",createdBy:"Holly",responses:11,dateCreated:"2017/04/02",command:"id1"},{survey:"Survey6",createdBy:"Anu",responses:1,dateCreated:"2017/01/11",command:"id1"},{survey:"Survey7",createdBy:"Michael",responses:100,dateCreated:"2017/01/23",command:"id1"}];i.tableParams=new o({},{dataset:r}),e.confirmDelete=function(){t.confirm("Are ya sure?")}}angular.module("nativeQDAApp").controller("surveyCtrl",e),e.$inject=["$scope","$window","NgTableParams","$sce","$uibModal"]}(),function(){function e(e){var t=this;t.onSubmit=function(){return t.formError="",angular.isDefined(t.formData)&&t.formData.surveyName?void console.log("Create Survey!"):(t.formError="All fields required, please try again",!1)},t.modal={close:function(t){e.close(t)},cancel:function(){e.dismiss("cancel")}}}angular.module("nativeQDAApp").controller("newSurveyCtrl",e),e.$inject=["$uibModalInstance"]}(),function(){"use strict";function e(e,t,o,a,n,i,r,s,l,c,u,p,m){function g(){m.start({referenceId:"file-list"}),s.getFileListDB().then(function(e){m.stop({referenceId:"file-list"}),v.fileList=e.data,d()})}function d(){v.tableParams=new r({sorting:{lastModified:"desc"}},{dataset:v.fileList})}function f(e,t,o){s.deleteFileDB(e).then(function(a){h(e,t,o)})}function h(e,t,o){s.deleteFileS3({key:e}).then(function(a){o&&o!=e&&s.deleteFileS3({key:o}),y(e),c.success("'"+t+"' was deleted successfully","","Success")})}function y(e){var t=v.fileList.findIndex(function(t){return t.key===e});t>-1&&v.fileList.splice(t,1),d()}var v=this;v.viewFile=function(e){s.signDownloadS3(e).then(function(e){o.open(e.data,"_blank")})},v.confirmDelete=function(e,t,o){swal({title:"Are you sure?",text:"Confirm to delete the file '"+t+"'",type:"warning",showCancelButton:!0,allowOutsideClick:!0,confirmButtonColor:"#d9534f",confirmButtonText:"Yes, delete it!"},function(){f(e,t,o)})},v.popupFileDetails=function(e){n.open({templateUrl:"/components/files/fileDetails/fileDetails.view.html",controller:"fileDetails as vm",size:"lg",resolve:{key:function(){return e}}}).result.then(function(){})},v.getFileListS3=function(){s.getFileListS3().then(function(e){doListFilesS3(e.data.Contents)})},v.pageHeader={title:"Browse Files"},v.fileList=null,g()}e.$inject=["mapService","$http","$window","$scope","$uibModal","Upload","NgTableParams","filesService","authentication","logger","$filter","$compile","bsLoadingOverlayService"],angular.module("nativeQDAApp").controller("filesBrowseCtrl",e)}(),function(){"use strict";function e(e,t,o,a,n,i,r,s,l,c,u,p,m){function g(){m.start({referenceId:"upload-map"});var e={center:[-34.4054039,150.87842999999998],zoom:4};N.map=L.map("map-files-page",e);var t=L.tileLayer("https://api.mapbox.com/v4/{map}/{z}/{x}/{y}.png?access_token={accessToken}",{map:"mapbox.light",accessToken:"pk.eyJ1IjoiYWlkYW4yNzUiLCJhIjoiY2o0MWVrMmFxMGVuNjJxbnlocmV6ZDJ0cCJ9.h77mANND4PPZz9U1z4OC3w",maxZoom:22}),o=L.tileLayer("https://api.mapbox.com/v4/{map}/{z}/{x}/{y}.png?access_token={accessToken}",{map:"mapbox.dark",accessToken:"pk.eyJ1IjoiYWlkYW4yNzUiLCJhIjoiY2o0MWVrMmFxMGVuNjJxbnlocmV6ZDJ0cCJ9.h77mANND4PPZz9U1z4OC3w",maxZoom:22}),a=L.tileLayer("https://api.mapbox.com/v4/{map}/{z}/{x}/{y}.png?access_token={accessToken}",{map:"mapbox.satellite",accessToken:"pk.eyJ1IjoiYWlkYW4yNzUiLCJhIjoiY2o0MWVrMmFxMGVuNjJxbnlocmV6ZDJ0cCJ9.h77mANND4PPZz9U1z4OC3w",maxZoom:22}),n=L.tileLayer("https://api.mapbox.com/v4/{map}/{z}/{x}/{y}.png?access_token={accessToken}",{map:"mapbox.streets-satellite",accessToken:"pk.eyJ1IjoiYWlkYW4yNzUiLCJhIjoiY2o0MWVrMmFxMGVuNjJxbnlocmV6ZDJ0cCJ9.h77mANND4PPZz9U1z4OC3w",maxZoom:22}),i=L.tileLayer("https://api.mapbox.com/v4/{map}/{z}/{x}/{y}.png?access_token={accessToken}",{map:"mapbox.wheatpaste",accessToken:"pk.eyJ1IjoiYWlkYW4yNzUiLCJhIjoiY2o0MWVrMmFxMGVuNjJxbnlocmV6ZDJ0cCJ9.h77mANND4PPZz9U1z4OC3w",maxZoom:22}),r=L.tileLayer("https://api.mapbox.com/v4/{map}/{z}/{x}/{y}.png?access_token={accessToken}",{map:"mapbox.streets-basic",accessToken:"pk.eyJ1IjoiYWlkYW4yNzUiLCJhIjoiY2o0MWVrMmFxMGVuNjJxbnlocmV6ZDJ0cCJ9.h77mANND4PPZz9U1z4OC3w",maxZoom:22}).addTo(N.map),s=(L.tileLayer("https://api.mapbox.com/v4/{map}/{z}/{x}/{y}.png?access_token={accessToken}",{map:"mapbox.comic",accessToken:"pk.eyJ1IjoiYWlkYW4yNzUiLCJhIjoiY2o0MWVrMmFxMGVuNjJxbnlocmV6ZDJ0cCJ9.h77mANND4PPZz9U1z4OC3w",maxZoom:22}),L.tileLayer("https://api.mapbox.com/v4/{map}/{z}/{x}/{y}.png?access_token={accessToken}",{map:"mapbox.outdoors",accessToken:"pk.eyJ1IjoiYWlkYW4yNzUiLCJhIjoiY2o0MWVrMmFxMGVuNjJxbnlocmV6ZDJ0cCJ9.h77mANND4PPZz9U1z4OC3w",maxZoom:22})),l=L.tileLayer("https://api.mapbox.com/v4/{map}/{z}/{x}/{y}.png?access_token={accessToken}",{map:"mapbox.run-bike-hike",accessToken:"pk.eyJ1IjoiYWlkYW4yNzUiLCJhIjoiY2o0MWVrMmFxMGVuNjJxbnlocmV6ZDJ0cCJ9.h77mANND4PPZz9U1z4OC3w",maxZoom:22}),c=L.tileLayer("https://api.mapbox.com/v4/{map}/{z}/{x}/{y}.png?access_token={accessToken}",{map:"mapbox.pencil",accessToken:"pk.eyJ1IjoiYWlkYW4yNzUiLCJhIjoiY2o0MWVrMmFxMGVuNjJxbnlocmV6ZDJ0cCJ9.h77mANND4PPZz9U1z4OC3w",maxZoom:22}),u=L.tileLayer("https://api.mapbox.com/v4/{map}/{z}/{x}/{y}.png?access_token={accessToken}",{map:"mapbox.pirates",accessToken:"pk.eyJ1IjoiYWlkYW4yNzUiLCJhIjoiY2o0MWVrMmFxMGVuNjJxbnlocmV6ZDJ0cCJ9.h77mANND4PPZz9U1z4OC3w",maxZoom:22}),p=L.tileLayer("https://api.mapbox.com/v4/{map}/{z}/{x}/{y}.png?access_token={accessToken}",{map:"mapbox.emerald",accessToken:"pk.eyJ1IjoiYWlkYW4yNzUiLCJhIjoiY2o0MWVrMmFxMGVuNjJxbnlocmV6ZDJ0cCJ9.h77mANND4PPZz9U1z4OC3w",maxZoom:22}),g=L.tileLayer("https://api.mapbox.com/v4/{map}/{z}/{x}/{y}.png?access_token={accessToken}",{map:"mapbox.high-contrast",accessToken:"pk.eyJ1IjoiYWlkYW4yNzUiLCJhIjoiY2o0MWVrMmFxMGVuNjJxbnlocmV6ZDJ0cCJ9.h77mANND4PPZz9U1z4OC3w",maxZoom:22}),h=L.gridLayer.googleMutant({maxZoom:22,type:"roadmap"}),y=L.gridLayer.googleMutant({maxZoom:22,type:"satellite"}),w=L.gridLayer.googleMutant({maxZoom:22,type:"terrain"}),x=L.gridLayer.googleMutant({maxZoom:22,type:"hybrid"}),k=L.gridLayer.googleMutant({maxZoom:22,type:"roadmap"});k.addGoogleLayer("TrafficLayer"),L.control.layers({"Mapbox Light":t,"Mapbox Dark":o,"Mapbox Satellite":a,"Mapbox Streets Satellite":n,"Mapbox Wheatpaste":i,"Mapbox Streets Basic":r,"Mapbox Outdoors":s,"Mapbox Run Bike Hike":l,"Mapbox Pencil":c,"Mapbox Pirates":u,"Mapbox Emerald":p,"Mapbox High Contrast":g,"Google Roadmap":h,"Google Aerial":y,"Google Terrain":w,"Google Hybrid":x,"Google Traffic":k},{},{collapsed:!0}).addTo(N.map),N.posMarker=L.marker([N.lat,N.lng],{icon:S,draggable:!0,zIndexOffset:1e3}).addTo(N.map).bindTooltip("<strong>File Upload Position</strong>").bindPopup("<p>Drag me to change the file upload position</p>"),N.posMarker.on("drag",function(e){d(e)}),N.map.on("click",function(e){N.posMarker.setLatLng(e.latlng),d(e)}),f(),v()}function d(e){N.posMarkerMoved||(N.posMarkerMoved=!0,N.posMarker.setPopupContent("<p>Drag me to change the file upload position</p>")),N.lat=e.latlng.lat,N.lng=e.latlng.lng,a.$apply()}function f(e){N.map.on("locationfound",h),N.map.on("locationerror",y),N.map.locate({setView:!0,maxZoom:15})}function h(e){var t=e.latlng,o=e.accuracy/2;N.lat=t.lat,N.lng=t.lng,a.$apply();var n=o<9?22:o>8&&o<17?21:o>16&&o<32?20:o>31&&o<63?19:o>62&&o<126?18:o>125&&o<251?17:o>250&&o<551?16:o>550&&o<1101?15:o>1100&&o<2201?14:o>2200&&o<4401?13:o>4400&&o<8801?12:o>8800&&o<17601?11:o>17600&&o<35201?10:o>35200&&o<70401?9:o>70400&&o<140801?8:o>140800&&o<281601?7:o>281600&&o<563201?6:o>563200&&o<1126401?5:o>1126400&&o<2252801?4:o>2252800&&o<4505601?3:o>4505600&&o<9011201?2:1;N.posMarker.setLatLng(t),N.posMarker.setPopupContent("\t<p>You are within "+u("formatDistance")(o)+" from this point<br />Drag me to change the file upload position</p>");var i=L.circle(t,{radius:o,color:"#cb2529"});N.posMarker.on("popupopen",function(){N.posMarkerMoved||(i.addTo(N.map),N.map.setView(t,n))}),N.posMarker.on("popupclose",function(){N.posMarkerMoved||N.map.removeLayer(i)}),c.success("User's location found",e,"Success")}function y(e){c.error(e.message,e,"Error")}function v(){s.getFileListDB().then(function(e){m.stop({referenceId:"upload-map"}),N.fileList=e.data,w()})}function w(){N.fileList.forEach(function(e){var t=e.coords.coordinates[1],o=e.coords.coordinates[0],a=L.marker([t,o],{icon:J}).bindTooltip("<strong>File Name:</strong> "+e.name+"<br /><strong>Created By:</strong> "+e.createdBy+"<br /><strong>Last Modified:</strong> "+u("date")(e.lastModified,"dd MMMM, yyyy h:mm a"));a.on("click ",function(){N.posMarker.setLatLng([t,o]),d({latlng:{lat:t,lng:o}})}),N.markers.addLayer(a)}),N.map.addLayer(N.markers)}function x(){var e=new DocxJS;e.parse(N.file,function(){e.getPlainText(function(e){b(e)})},function(e){c.error(e.msg,e,"Error"),A()})}function k(){function e(e){return PDFJS.getDocument({data:e}).then(function(e){for(var t=e.pdfInfo.numPages,o=[],a=1;a<=t;a++){var n=e.getPage(a);o.push(n.then(function(e){return e.getTextContent().then(function(e){return e.items.map(function(e){return e.str}).join("")})}))}return Promise.all(o).then(function(e){return e.join("")})})}var t=new FileReader;t.onload=function(){e(this.result).then(function(e){b(e)},function(e){c.error(e.message,e,"Error"),A()})},t.readAsArrayBuffer(N.file)}function b(e){var t=N.fileInfo.name.replace(/\.[^/.]+$/,"");t+=".txt",N.textFile=new File([e],t,{type:"text/plain"}),N.textFileInfo={name:N.textFile.name,type:N.textFile.type},D()}function D(){s.signUploadS3(N.textFileInfo).then(function(e){i.upload({method:"POST",url:e.data.url,fields:e.data.fields,file:N.textFile}).then(function(t){console.log(N.textFileInfo.name+" successfully uploaded to S3"),N.textFileInfo.key=e.data.fields.key,N.fileInfo.key=N.textFileInfo.key.substring(0,N.textFileInfo.key.indexOf("-")),N.fileInfo.key+="-"+N.fileInfo.name,M()},function(e){var t=$.parseXML(e.data);c.error($(t).find("Message").text(),"","Error"),A()})})}function M(){s.signUploadS3(N.fileInfo).then(function(e){i.upload({method:"POST",url:e.data.url,fields:e.data.fields,file:N.file}).progress(function(e){N.currentPercentage=parseInt(100*e.loaded/e.total)}).then(function(t){console.log(N.fileInfo.name+" successfully uploaded to S3");$.parseXML(t.data);var o=N.tags.map(function(e){return e.text}),a=e.data.fields.key,n=e.data.url+"/"+encodeURIComponent(a),i={name:N.fileInfo.name,key:a,size:N.file.size,url:n,createdBy:l.currentUser().firstName,coords:{lat:N.lat,lng:N.lng},tags:o};N.textFileInfo.key&&(i.textFileKey=N.textFileInfo.key),N.fileInfo.isTxtFile&&(i.textFileKey=a),s.addFileDB(i).then(function(e){N.fileList.push(e.data),console.log(N.fileInfo.name+" successfully added to DB"),c.success(N.fileInfo.name+" successfully uploaded","","Success"),C(),A()})},function(e){var t=$.parseXML(e.data);c.error($(t).find("Message").text(),"","Error"),A()})})}function C(){N.markers.clearLayers(),w()}function A(){N.file={},N.fileInfo={},N.textFile={},N.textFileInfo={}}var N=this;N.onFileSelect=function(e){e.length>0&&(N.file=e[0],N.fileInfo={name:N.file.name,type:N.file.type})},N.uploadFile=function(){var e=N.fileInfo.name.split(".").pop().toLowerCase();"pdf"===e?k():"docx"===e?x():"txt"===e?(N.fileInfo.isTxtFile=!0,M()):M()},N.map=null,N.marker=null,N.markers=L.markerClusterGroup({showCoverageOnHover:!1}),N.posMarker=null,N.posMarkerMoved=!1,N.fileList=null,N.lat=-34.4054039,N.lng=150.87842999999998,N.tags=[],N.address="",N.formattedAddress="",N.currentPercentage="0",N.file={},N.fileInfo={},N.textFile={},N.textFileInfo={},N.pageHeader={title:"Upload Files"};var z=L.Icon.extend({options:{shadowUrl:"assets/img/map/markers/marker-shadow.png",iconSize:[25,41],shadowSize:[41,41],iconAnchor:[12.5,41],shadowAnchor:[12.5,41],popupAnchor:[0,-50]}}),J=new z({iconUrl:"assets/img/map/markers/marker-icon-2x.png"}),S=new z({iconUrl:"assets/img/map/markers/marker-icon-pos.png"});g()}e.$inject=["mapService","$http","$window","$scope","$uibModal","Upload","NgTableParams","filesService","authentication","logger","$filter","$compile","bsLoadingOverlayService"],angular.module("nativeQDAApp").controller("filesUploadCtrl",e)}(),function(){function e(e,t,o,a,n){function i(e,t){a.objectAclDB({key:e,acl:t}).then(function(e){r.resultButton="success",r.file.acl=t},function(e){r.resultButton="error"})}var r=this;r.updateAclS3=function(e,t){r.isSubmittingButton=!0,a.objectAclS3({key:e,acl:t}).then(function(o){i(e,t)},function(e){r.resultButton="error"})},r.isSubmittingButton=null,r.resultButton=null,r.makePublicOptions={buttonDefaultText:"Make Public",animationCompleteTime:1e3,buttonSubmittingText:"Processing...",buttonSuccessText:"Done!"},r.makePrivateOptions={buttonDefaultText:"Make Private",animationCompleteTime:1e3,buttonSubmittingText:"Processing...",buttonSuccessText:"Done!"},n.start({referenceId:"file-details"}),a.fileReadOneDB(o).then(function(e){n.stop({referenceId:"file-details"}),r.file=e.data,r.tags=r.file.tags.join(", ")}),r.modal={close:function(){e.close()},cancel:function(){e.dismiss("cancel")}}}e.$inject=["$uibModalInstance","$window","key","filesService","bsLoadingOverlayService"],angular.module("nativeQDAApp").controller("fileDetails",e)}(),function(){function e(e){function t(){u.forEach(function(e){p.push({text:e.text,r:100*e.relevance,dbpedia_resource:e.dbpedia_resource})}),o()}function o(){var e={nodes:p};a(e),n(e)}function a(e){i=document.querySelector("#graph").clientWidth,r=document.querySelector("#graph").clientHeight,s=i-((c={top:0,left:0,bottom:0,right:0}).left+c.right),l=r-(c.top+c.bottom),m.attr("width",i).attr("height",r),g.attr("width",s).attr("height",l).attr("transform","translate("+[c.left,c.top]+")")}function n(e){var t=d3.forceSimulation().force("link",d3.forceLink().id(function(e){return e.index})).force("collide",d3.forceCollide(function(e){return e.r+1}).iterations(24)).force("charge",d3.forceManyBody()).force("center",d3.forceCenter(s/2,s/2)).force("y",d3.forceY(0)).force("x",d3.forceX(0)),o=d3.select("body").append("div").attr("class","tooltip").style("opacity",0).style("background","#fff").style("padding","10px").style("border-radius","10px").style("font-weight",600),a=m.append("g").attr("class","nodes").selectAll("circle").data(e.nodes).enter().append("circle").attr("r",function(e){return e.r}).on("mouseover",function(e){o.transition().duration(200).style("opacity",.9),o.html("Concept: "+e.text+"<br/>Relevance: "+e.r+"%<br/>DBpedia Resource: <a href='"+e.dbpedia_resource+"' target='_blank'>"+e.dbpedia_resource+"</a>").style("left",d3.event.pageX+"px").style("top",d3.event.pageY-28+"px")}).on("mouseout",function(e){o.transition().duration(500).delay(1500).style("opacity",0)}).call(d3.drag().on("start",function(e){d3.event.active||t.alphaTarget(.3).restart(),e.fx=e.x,e.fy=e.y}).on("drag",function(e){e.fx=d3.event.x,e.fy=d3.event.y}).on("end",function(e){d3.event.active||t.alphaTarget(0),e.fx=null,e.fy=null}));t.nodes(e.nodes).on("tick",function(){a.attr("cx",function(e){return e.x}).attr("cy",function(e){return e.y})})}var i,r,s,l,c,u={},p=[],m=d3.select("#graph").append("svg"),g=m.append("g").classed("chartLayer",!0);e.readConceptAnalysis("5960cfe6b27e412628b02bb2").then(function(e){u=e.data.concepts,t()})}e.$inject=["analysisService"],angular.module("nativeQDAApp").controller("bubbleChartCtrl",e)}(),function(){angular.module("nativeQDAApp").controller("systemSettingsCtrl",function(){this.pageHeader={title:"Settings",strapline:"change how things work"}})}(),function(){angular.module("nativeQDAApp").controller("userSettingsCtrl",function(){this.pageHeader={title:"Settings",strapline:"change how things work"}})}(),function(){function e(e,t,o,a){function n(){a.start({referenceId:"user-info"}),o.getUserInfo(t).then(function(e){a.stop({referenceId:"user-info"}),i.userInfo=e.data})}var i=this;i.getUserInfo=n,i.userInfo={email:"",firstName:"",lastName:"",company:""},n(),i.modal={close:function(){e.close()},cancel:function(){e.dismiss("cancel")}}}e.$inject=["$uibModalInstance","userEmail","usersService","bsLoadingOverlayService"],angular.module("nativeQDAApp").controller("editProfileCtrl",e)}(),function(){function e(e,t,o){var a=this,n=10;o.event({email:t.currentUser().email}),a.bothOver=!0,a.fatherOver=!0,a.MotherOver=!0,a.bothAus=!0,function(e,t){var o=new google.maps.LatLng(e,t),i=document.getElementById("map"),r={center:o,zoom:n,panControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DEFAULT,position:google.maps.ControlPosition.TOP_RIGHT}},s=[{location:new google.maps.LatLng(-33.8584827,151.12866859999997),weight:9029},{location:new google.maps.LatLng(-36.0737293,146.91354179999996),weight:358},{location:new google.maps.LatLng(-33.81527799999999,151.10111099999995),weight:3235},{location:new google.maps.LatLng(-33.76288,150.99212),weight:7427},{location:new google.maps.LatLng(-33.771,150.9063),weight:21538},{location:new google.maps.LatLng(-33.8688197,151.20929550000005),weight:4163},{location:new google.maps.LatLng(-33.83965,151.20541000000003),weight:8865},{location:new google.maps.LatLng(-33.68919759999999,151.26853819999997),weight:1618},{location:new google.maps.LatLng(-33.91735159999999,150.9283736),weight:5627},{location:new google.maps.LatLng(-33.49999729999999,150.2499997),weight:3383},{location:new google.maps.LatLng(-33.81499999999999,151.00111100000004),weight:27386},{location:new google.maps.LatLng(-33.90006659999999,150.84785220000003),weight:11435},{location:new google.maps.LatLng(-34.03314,151.05830000000003),weight:1552},{location:new google.maps.LatLng(-33.3529519,151.44354739999994),weight:979},{location:new google.maps.LatLng(-33.88175470000001,150.8609358),weight:121088}],l=[{location:new google.maps.LatLng(-33.8584827,151.12866859999997),weight:187},{location:new google.maps.LatLng(-36.0737293,146.91354179999996),weight:18},{location:new google.maps.LatLng(-33.81527799999999,151.10111099999995),weight:64},{location:new google.maps.LatLng(-33.76288,150.99212),weight:141},{location:new google.maps.LatLng(-33.771,150.9063),weight:224},{location:new google.maps.LatLng(-33.8688197,151.20929550000005),weight:130},{location:new google.maps.LatLng(-33.83965,151.20541000000003),weight:202},{location:new google.maps.LatLng(-33.68919759999999,151.26853819999997),weight:96},{location:new google.maps.LatLng(-33.91735159999999,150.9283736),weight:132},{location:new google.maps.LatLng(-33.49999729999999,150.2499997),weight:165},{location:new google.maps.LatLng(-33.81499999999999,151.00111100000004),weight:179},{location:new google.maps.LatLng(-33.90006659999999,150.84785220000003),weight:123},{location:new google.maps.LatLng(-34.03314,151.05830000000003),weight:107},{location:new google.maps.LatLng(-33.3529519,151.44354739999994),weight:128},{location:new google.maps.LatLng(-33.88175470000001,150.8609358),weight:2219}],c=[{location:new google.maps.LatLng(-33.8584827,151.12866859999997),weight:129},{location:new google.maps.LatLng(-36.0737293,146.91354179999996),weight:15},{location:new google.maps.LatLng(-33.81527799999999,151.10111099999995),weight:53},{location:new google.maps.LatLng(-33.76288,150.99212),weight:127},{location:new google.maps.LatLng(-33.771,150.9063),weight:151},{location:new google.maps.LatLng(-33.8688197,151.20929550000005),weight:106},{location:new google.maps.LatLng(-33.83965,151.20541000000003),weight:173},{location:new google.maps.LatLng(-33.68919759999999,151.26853819999997),weight:60},{location:new google.maps.LatLng(-33.91735159999999,150.9283736),weight:83},{location:new google.maps.LatLng(-33.49999729999999,150.2499997),weight:98},{location:new google.maps.LatLng(-33.81499999999999,151.00111100000004),weight:145},{location:new google.maps.LatLng(-33.90006659999999,150.84785220000003),weight:98},{location:new google.maps.LatLng(-34.03314,151.05830000000003),weight:59},{location:new google.maps.LatLng(-33.3529519,151.44354739999994),weight:95},{location:new google.maps.LatLng(-33.88175470000001,150.8609358),weight:1681}],u=[{location:new google.maps.LatLng(-33.8584827,151.12866859999997),weight:68},{location:new google.maps.LatLng(-36.0737293,146.91354179999996),weight:13},{location:new google.maps.LatLng(-33.81527799999999,151.10111099999995),weight:45},{location:new google.maps.LatLng(-33.76288,150.99212),weight:66},{location:new google.maps.LatLng(-33.771,150.9063),weight:99},{location:new google.maps.LatLng(-33.8688197,151.20929550000005),weight:62},{location:new google.maps.LatLng(-33.83965,151.20541000000003),weight:116},{location:new google.maps.LatLng(-33.68919759999999,151.26853819999997),weight:65},{location:new google.maps.LatLng(-33.91735159999999,150.9283736),weight:69},{location:new google.maps.LatLng(-33.49999729999999,150.2499997),weight:96},{location:new google.maps.LatLng(-33.81499999999999,151.00111100000004),weight:84},{location:new google.maps.LatLng(-33.90006659999999,150.84785220000003),weight:43},{location:new google.maps.LatLng(-34.03314,151.05830000000003),weight:47},{location:new google.maps.LatLng(-33.3529519,151.44354739999994),weight:106},{location:new google.maps.LatLng(-33.88175470000001,150.8609358),weight:1110}],p=new google.maps.Map(i,r),m=new google.maps.visualization.HeatmapLayer,g=null;a.radiusSlider={value:100,options:{floor:0,ceil:200,onChange:function(){m.set("radius",a.radiusSlider.value)}}},a.opacitySlider={value:.6,options:{floor:0,ceil:1,step:.01,precision:10,onChange:function(){m.set("opacity",a.opacitySlider.value)}}},a.updateMap=function(){m&&m.setMap(null);var e=[];a.bothOver&&Array.prototype.push.apply(e,s),a.fatherOver&&Array.prototype.push.apply(e,l),a.MotherOver&&Array.prototype.push.apply(e,c),a.bothAus&&Array.prototype.push.apply(e,u),m.setData(e),m.setOptions({radius:a.radiusSlider.value,opacity:a.opacitySlider.value,gradient:g}),m.setMap(p)},a.removeGrtSyd=function(){a.rmGrtSyd?(s.pop(),l.pop(),c.pop(),u.pop()):(s.push({location:new google.maps.LatLng(-33.88175470000001,150.8609358),weight:121088}),l.push({location:new google.maps.LatLng(-33.88175470000001,150.8609358),weight:2219}),c.push({location:new google.maps.LatLng(-33.88175470000001,150.8609358),weight:1681}),u.push({location:new google.maps.LatLng(-33.88175470000001,150.8609358),weight:1110})),a.updateMap()},a.changeGradient=function(){g=a.changeGrad?["rgba(0, 255, 255, 0)","rgba(0, 255, 255, 1)","rgba(0, 191, 255, 1)","rgba(0, 127, 255, 1)","rgba(0, 63, 255, 1)","rgba(0, 0, 255, 1)","rgba(0, 0, 223, 1)","rgba(0, 0, 191, 1)","rgba(0, 0, 159, 1)","rgba(0, 0, 127, 1)","rgba(63, 0, 91, 1)","rgba(127, 0, 63, 1)","rgba(191, 0, 31, 1)","rgba(255, 0, 0, 1)"]:null,a.updateMap()},a.updateMap()}(-33.848192,151.061857)}angular.module("nativeQDAApp").controller("heatmapCtrl",e),e.$inject=["$scope","authentication","events"]}(),function(){function e(e,t){var o=this;o.onSubmit=function(){e.aylienConceptAnalysis({text:o.analysisText,language:o.selectedLanguage.value}).then(function(e){o.responseData=e.data,console.log(e)})},o.selectedLanguage=null,o.language=[{language:"English",value:"en"},{language:"German",value:"de"},{language:"French",value:"fr"},{language:"Italian",value:"it"},{language:"Spanish",value:"es"},{language:"Portuguese",value:"pt"}],o.responseData=null,o.pageHeader={title:"Test Analysis",strapline:"Using AYLIEN-TextAPI"}}angular.module("nativeQDAApp").controller("testAylienCtrl",e),e.$inject=["analysisService","$scope"]}(),function(){function e(e,t){var o=this;o.onSubmit=function(){e.watsonConceptAnalysis({url:o.analysisURL}).then(function(e){o.responseData=e.data,console.log(e)})},o.analysisURL=null,o.responseData=null,o.pageHeader={title:"Test Analysis",strapline:"Using IBM's Watson API"}}angular.module("nativeQDAApp").controller("testWatsonCtrl",e),e.$inject=["analysisService","$scope"]}();